var KIND=function(){function e(){var e="service/"+DP_AUTH.config().kind.relayID+"/subscribers/";return DP_AUTH.jso().ajax({url:DP_AUTH.config().api_endpoints.kind+e,dataType:"json"}).then(function(e,r,n){return!e.status||$.isEmptyObject(e.data)?$.Deferred().reject(n,r,"Henting av tjenestetilganger (KIND) feilet.").promise():(u=e.data,KIND.isSubscriber()?$.Deferred().resolve(u,r,n).promise():$.Deferred().reject(n,r,"Din org abonnerer ikke p&aring; tjenesten.").promise())}).done(function(e){UTILS.updateAuthProgress("Tjenestetilganger"),UTILS.showAuthInfo("Tjenestetilgang","Abonnent")}).fail(function(e,r,n){UTILS.showAuthError("Tjenestetilganger",n)})}function r(){return KIND.subscribers()[DATAPORTEN.user().org.id]}function n(){return Object.keys(KIND.subscribers())}function t(){var e={total:0,full:0,trial:0,other:0};return $.each(KIND.subscribers(),function(r,n){switch(n.subscription_code){case 20:e.full++;break;case 15:e.trial++;break;case 10:e.trial++;break;default:e.other++}e.total++}),e}function i(e){return KIND.subscribers()[e].subscription_code||404}var s,u={};return function(){$.when(DATAPORTEN.readyUser()).done(function(){s=e()})}(),{ready:function(){return s},subscribers:function(){return u},subscriptionCount:function(){return t()},subscribingOrgNames:function(){return n()},isSubscriber:function(){return!$.isEmptyObject(KIND.subscriberDetails())},subscriberDetails:function(){return r()},orgSubscriptionStatusCode:function(e){return i(e)},subscriptionCodesToNames:function(){var e={x:" --- ",10:"Bestilt",15:"Utpr√∏ving",20:"Abonnent",30:"Avbestilt",40:"Stengt",50:"Utfasing",404:"Ukjent"};return e},subscriptionCodesToColors:function(){var e={x:"red",10:"blue",15:"orange",20:"green",30:"red",40:"red",50:"red",404:"red"};return e}}}();