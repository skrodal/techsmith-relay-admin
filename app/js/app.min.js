var APP=function(){function t(){$("span.supportEmail").html(CONFIG.RELAY_SUPPORT_EMAIL()),$("span.relaySupportURL").html(CONFIG.RELAY_SUPPORT_URL()),$("a.relaySupportURL").attr("href",CONFIG.RELAY_SUPPORT_URL()),$("span.relayServiceURL").html(CONFIG.RELAY_SERVICE_URL()),$("a.relayServiceURL").attr("href",CONFIG.RELAY_SERVICE_URL()),$("span.screencastBaseURL").html(CONFIG.SCREENCAST_BASE_URL()),$("a.screencastBaseURL").attr("href",CONFIG.SCREENCAST_BASE_URL()),$("a.relayRegisterURL").attr("href",CONFIG.RELAY_REGISTER_URL()),$("a.relayClientDownloadURL").attr("href",CONFIG.RELAY_CLIENT_DOWNLOAD_URL())}function e(){$(".userFirstName").html(" "+DATAPORTEN.user().name.first),$(".userFullName").html(" "+DATAPORTEN.user().name.full),$(".feideOrg").html(" "+DATAPORTEN.user().org.name),$(".userRole").html(" "+DATAPORTEN.user().role.title),$(".feideAffiliation").html(" Ansatt"),$(".userImage").attr("src",DATAPORTEN.user().photo),$("#dataportenSessionInfo").text(JSON.stringify(DATAPORTEN.user(),void 0,2)),$("#userMenu").fadeIn().removeClass("hidden")}function r(){$(".homeOrgUserCount").html(RELAY.orgUserCount(DATAPORTEN.user().org.id)),$(".subscribersCount").html(RELAY.orgCount()),$(".storageCostPerTB").html(RELAY.storageCostTB()),$.when(RELAY.usersTotalCountXHR()).done(function(t){$(".globalUsersCountTotal").html(parseInt(t.total)),$(".globalUsersCountByAffiliation").html(parseInt(t.employees.total)+" ansatte og "+parseInt(t.students.total)+" studenter"),$(".globalActiveUsersCountTotal").html(parseInt(t.active)),$(".globalActiveUsersCountByAffiliation").html(parseInt(t.employees.active)+" ansatte og "+parseInt(t.students.active)+" studenter")}),$.when(RELAY.presentationsTotalXHR()).done(function(t){$(".globalPresentationCount").html(t)}),$.when(RELAY.serviceStorageXHR()).done(function(t){$(".subscribersDiskusageTotal").html(UTILS.mib2tb(t).toFixed(2)+"TB")}),$.when(RELAY.serviceInfoXHR()).done(function(t){$(".relayVersion").html(t.version.versValue);var e=t.version.createdOn.split(" ")[0].split("-");$(".relayLastUpgrade").html(e[2]+"."+e[1]+"."+e[0]),$(".relayWorkers").html(t.workers.length)}),$("#pageDashboard").find("#serverInfo").find(".ajax").hide()}var n;return $(document).ready(function(){n=new JSONEditor(document.getElementById("jsonDataExport"),{modes:["view","text"],mode:"text",search:!0,indentation:4}),t(),$.when(DATAPORTEN.READY()).done(function(){return e(),DATAPORTEN.isOrgAdmin()||DATAPORTEN.isSuperAdmin()?(RELAY.init(),void $.when(RELAY.ready()).done(function(){MENU.init(),r()})):(UTILS.showAuthError("Nektet tilgang","Du mangler brukerkonto og er ikke administrator for tjenesten. Du kan <a href='"+CONFIG.RELAY_REGISTER_URL()+"' target='_blank' class='text-light-blue'>opprette konto her</a>."),!1)})}),$(document).on("mouseenter",".mightOverflow",function(){var t=$(this),e=t.attr("title");e?this.offsetWidth>=this.scrollWidth&&e==t.text()&&t.removeAttr("title"):this.offsetWidth<this.scrollWidth&&t.attr("title",t.text())}),{jsonEditor:function(){return n}}}();